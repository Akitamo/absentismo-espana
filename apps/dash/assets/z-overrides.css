/* z-overrides.css: estilos manuales que NO se regeneran desde tokens */

:root {
  --radius-lg: 12px;
  --card-shadow: 0 1px 2px rgba(0,0,0,0.04), 0 4px 12px rgba(0,0,0,0.06);
  --sidebar-w: 240px;
  --color-success: #16a34a;
  --color-danger: #e11d48;
}

/* Shell con sidebar fija */
.app-shell { display: block; }
.sidebar {
  position: fixed; inset: 0 auto 0 0; width: var(--sidebar-w); background: var(--color-surface);
  border-right: 1px solid var(--border-color); padding: 12px; overflow-y: auto; z-index: 1100; box-sizing: border-box;
}
.sidebar .brand { font-weight: 700; color: var(--color-primary); margin-bottom: 12px; }
.sidebar .brand-logo { display:block; width: 150px; height: auto; margin: 4px 0 12px 4px; }
.sidebar .nav { display:flex; flex-direction: column; gap: 6px; }
.sidebar .nav a { color: var(--color-text); text-decoration: none; padding: 8px 10px; border-radius: 8px; display:flex; align-items:center; gap:10px; height:36px; font-weight:500; }
.sidebar .nav a.active, .sidebar .nav a:hover { color: var(--color-primary); background: #eef3ff; }
.sidebar .nav a .icon { width:18px; display:inline-flex; align-items:center; justify-content:center; opacity:.75; }
.sidebar .nav a.active .icon { opacity:1; }
.sidebar .sidebar-user { position: sticky; bottom: 0; margin-top: 16px; padding-top: 8px; border-top: 1px solid var(--border-color); font-size: 12px; color: var(--color-muted); }

.content { margin-left: var(--sidebar-w); }
.header, .content-main { max-width: var(--content-width); margin: 0 auto; }
/* Ampliar ancho útil del contenido (reducir márgenes laterales) */
.content-main { max-width: 100% !important; margin: 0 !important; }
.header { position: fixed; top: 0; left: var(--sidebar-w); right: 0; z-index: 1000; background: var(--color-surface); border-bottom: 1px solid var(--border-color); padding: 8px 0; }
/* Anular restricción global header, main { max-width } del theme base */
header { max-width: 100% !important; margin: 0 !important; }
.content-main { padding: 72px 16px 16px; }

/* Top bar (full width header) */
.topbar-inner { display:flex; align-items:center; justify-content:space-between; padding: 8px 16px; }
.topbar-inner .page-title { margin: 0; font-size: 18px; }
.top-actions { display:flex; align-items:center; gap: 8px; }
.top-search { width: 520px; max-width: 52vw; padding: 8px 12px; border:1px solid var(--border-color); border-radius: 999px; }
.icon-btn { width: 34px; height: 34px; display:inline-flex; align-items:center; justify-content:center; border:none; background: transparent; border-radius: 8px; cursor: pointer; }
.icon-btn:hover { background: #eef3ff; color: var(--color-primary); }
.user-chip { padding: 6px 10px; border:1px solid var(--border-color); border-radius: 999px; color: var(--color-muted); font-size: 12px; }
.hamburger { display: none; }

/* KPI cards */
.kpi-card { border-radius: var(--radius-lg); padding: 16px; box-shadow: var(--card-shadow); }
.kpi-card .kpi-head { display:flex; align-items:center; gap: 8px; margin-bottom: 6px; }
.kpi-card .kpi-icon { width: 28px; height: 28px; border-radius: 8px; background: #eef3ff; color: var(--color-primary); display:inline-flex; align-items:center; justify-content:center; font-size: 14px; }
.kpi-card .kpi-title { margin: 0; }
.kpi-card .kpi-value { font-size: 24px; font-weight: 700; margin-top: 2px; }
.kpi-card .kpi-trend { font-size: 12px; margin-top: 4px; color: var(--color-muted); }
.kpi-card .kpi-trend.up { color: var(--color-success); }
.kpi-card .kpi-trend.down {
/* Títulos unificados para cards y KPIs */
.card-title, .kpi-card .kpi-title {
  font-weight: 700;
  font-size: 16px;
  color: var(--color-text);
}

/* Card header icon aligned to the left of title */
.card-header .card-titlewrap { display:flex; align-items:center; gap: 10px; }
.card-header .card-icon {
  width: 36px;
  height: 36px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: 10px;
  background: #eef3ff; /* subtle chip behind svg */
  box-shadow: 0 2px 8px rgba(27,89,248,0.25);
  padding: 6px; /* breathing room around svg */
  color: var(--color-primary);
} color: var(--color-danger); }

/* Icono genérico para headers de card (SVG/emoji) */
.card-header .card-icon {
  width: 32px;
  height: 32px;
  margin-right: 8px;
  display: inline-block;
  color: var(--color-primary);
}

/* Títulos unificados para cards y KPIs */
.card-title, .kpi-card .kpi-title {
  font-weight: 700;
  font-size: 16px;
  color: var(--color-text);
}

/* Override columnas KPIs por defecto: 2 en desktop */
.kpi-grid { grid-template-columns: repeat(2, 1fr); }

/* Generic card */
.card { background: var(--color-surface); border: 1px solid var(--border-color); border-radius: var(--radius-lg); box-shadow: var(--card-shadow); display:flex; flex-direction: column; overflow: hidden; }
.card-header { display:flex; align-items:center; justify-content:space-between; gap: 8px; padding: 12px 14px; border-bottom: 1px solid var(--border-color); }
.card-header .card-titlewrap { display:flex !important; align-items:center; gap: 10px; }
.card-header .card-icon { width:36px; height:36px; display:inline-flex; align-items:center; justify-content:center; border-radius:10px; background:#eef3ff; box-shadow: 0 2px 8px rgba(27,89,248,0.25); padding:6px; color: var(--color-primary); }
.card-title { font-weight: 600; }
.card-subtitle { color: var(--color-muted); font-size: var(--font-size-sm); }
.card-body { padding: 12px 14px; }
.card-footer { padding: 10px 14px; border-top: 1px solid var(--border-color); }
.card--compact .card-body { padding: 8px 10px; }
.card--scroll .card-body { overflow: auto; }

/* react-select (dcc.Dropdown) */
.filter .Select-control,
.filter [class*="Select__control"] { border:1px solid var(--border-color); border-radius: var(--radius-lg); min-height:38px; box-shadow:none; }
.filter .Select-control:hover,
.filter [class*="Select__control"]:hover { border-color: var(--color-primary); }
.filter [class*="Select__single-value"] { color: var(--color-text); }
.filter [class*="Select__placeholder"] { color: var(--color-muted); }
.filter .Select-menu,
.filter [class*="Select__menu"] { border:1px solid var(--border-color); box-shadow: var(--card-shadow); }
.filter [class*="Select__option--is-focused"] { background: rgba(27,89,248,0.06); }
.filter [class*="Select__option--is-selected"] { background: rgba(27,89,248,0.12); color: var(--color-primary); }

/* DataTable */
.dash-table-container { position: relative; }
.dash-table-container .dash-spreadsheet-container { border:1px solid var(--border-color); border-radius: var(--radius-lg); overflow:hidden; box-shadow: inset 8px 0 8px -8px rgba(0,0,0,.08), inset -8px 0 8px -8px rgba(0,0,0,.08); }
.dash-table-container th { background:#FAFBFF; color:var(--color-text); font-weight:600; position: sticky; top: 0; z-index: 1; }
.dash-table-container td, .dash-table-container th { font-family: var(--font-family); font-size: var(--font-size-base); }

/* (Overlay util retirado) */

/* ===================== */
/* Responsive baseline   */
/* ===================== */

/* lg: <= 1200px */
@media (max-width: 1200px) {
  :root { --sidebar-w: 64px; }
  /* Sidebar icon-only */
  .sidebar .label { display: none; }
  .sidebar .nav { padding: 4px; }
  .sidebar .nav a { justify-content: center; padding: 8px; margin: 0 4px; box-sizing: border-box; overflow: hidden; white-space: nowrap; }
  .sidebar .nav a .icon { width: 22px; }
  .sidebar .brand-logo { width: 52px; margin: 8px auto; display: block; }
  .top-search { width: 380px; }
  .filters { grid-template-columns: repeat(2, minmax(220px, 1fr)); }
  .kpi-grid { grid-template-columns: repeat(2, 1fr); }
}

/* md: <= 992px */
@media (max-width: 992px) {
  .top-search { width: 320px; }
  .main { display: grid; grid-template-columns: 1fr; }
  .kpi-grid { grid-template-columns: repeat(2, 1fr); }
}

/* sm/xs: <= 768px */
@media (max-width: 768px) {
  :root { --sidebar-w: 64px; }
  /* Drawer sidebar */
  .sidebar { transform: translateX(-100%); transition: transform .2s ease; box-shadow: 0 2px 16px rgba(0,0,0,.2); }
  .sidebar.open { transform: translateX(0); }
  .hamburger { display:inline-flex; }
  #backdrop { position: fixed; inset: 0; background: rgba(0,0,0,.35); z-index: 900; }
  .top-search { width: 100%; max-width: none; }
  .filters { grid-template-columns: 1fr; }
  .kpi-grid { grid-template-columns: 1fr; }
  .dash-table-container { overflow-x: auto; }
  .filter [class*="Select__control"] { min-height: 44px; }
  .kpi-card .kpi-value { font-size: 20px; }
}


/* Secciones con insight a la derecha */
.section-grid { display: grid; grid-template-columns: minmax(0, 2fr) clamp(260px, 24vw, 340px); gap: 16px; align-items: start; margin-bottom: 16px; }
.insight-panel { background: var(--color-surface); border: 1px solid var(--border-color); border-radius: var(--radius-lg); box-shadow: var(--card-shadow); padding: 16px; color: var(--color-text); }
.insight-panel h4 { margin: 0 0 8px 0; font-size: 16px; font-weight: 700; }
.insight-panel p { margin: 6px 0; font-size: var(--font-size-base); color: var(--color-text); }
.insight-panel .insight-meta { margin-top: 8px; color: var(--color-muted); font-size: var(--font-size-sm); }

/* KPI compact para dejar espacio a insight */
.kpi-grid--compact .kpi-card { padding: 12px; }
.kpi-grid--compact .kpi-value { font-size: 20px; }



/* Layout fluido por secciones */
.section { display: grid; grid-template-columns: 1fr clamp(240px, 22vw, 320px); gap: 16px; align-items: start; margin-bottom: 16px; }
.left-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(var(--card-min, 280px), 1fr)); gap: 16px; align-items: start; }
.insight-panel { background: var(--color-surface); border: 1px solid var(--border-color); border-radius: var(--radius-lg); box-shadow: var(--card-shadow); padding: 16px; color: var(--color-text); }
.insight-panel h4 { margin: 0 0 8px 0; font-size: 16px; font-weight: 700; }
.insight-panel p { margin: 6px 0; font-size: var(--font-size-base); color: var(--color-text); }
.insight-panel .insight-meta { margin-top: 8px; color: var(--color-muted); font-size: var(--font-size-sm); }
.section > .insight-panel { align-self: start; }
@media (max-width: 992px) { .section { grid-template-columns: 1fr; } }
